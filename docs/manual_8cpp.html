<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: src/manual.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
   <div id="projectbrief">third research track 1 assignement</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">manual.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Controller in manual modes 2 and 3.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ros/ros.h&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;sensor_msgs/LaserScan.h&quot;</code><br />
<code>#include &quot;geometry_msgs/Twist.h&quot;</code><br />
<code>#include &quot;std_msgs/Int32.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for manual.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="manual_8cpp__incl.png" border="0" usemap="#src_2manual_8cpp" alt=""/></div>
<map name="src_2manual_8cpp" id="src_2manual_8cpp">
<area shape="rect" title="Controller in manual modes 2 and 3." alt="" coords="237,5,359,32"/>
<area shape="rect" title=" " alt="" coords="5,80,84,107"/>
<area shape="rect" title=" " alt="" coords="108,80,179,107"/>
<area shape="rect" title=" " alt="" coords="203,80,393,107"/>
<area shape="rect" title=" " alt="" coords="417,80,593,107"/>
<area shape="rect" title=" " alt="" coords="617,80,750,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa0a00b277a12ab91542010de9fd38df9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manual_8cpp.html#aa0a00b277a12ab91542010de9fd38df9">ModeCallBack</a> (const std_msgs::Int32 &amp;msg)</td></tr>
<tr class="memdesc:aa0a00b277a12ab91542010de9fd38df9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the selected behavior mode.  <a href="manual_8cpp.html#aa0a00b277a12ab91542010de9fd38df9">More...</a><br /></td></tr>
<tr class="separator:aa0a00b277a12ab91542010de9fd38df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55a5fd22bb68a99b97ad0ba4ac56f88b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manual_8cpp.html#a55a5fd22bb68a99b97ad0ba4ac56f88b">CmdCallBack</a> (const geometry_msgs::Twist &amp;msg)</td></tr>
<tr class="memdesc:a55a5fd22bb68a99b97ad0ba4ac56f88b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the user defined twist.  <a href="manual_8cpp.html#a55a5fd22bb68a99b97ad0ba4ac56f88b">More...</a><br /></td></tr>
<tr class="separator:a55a5fd22bb68a99b97ad0ba4ac56f88b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af412554a33103f533b0e2ba1df9aeb"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manual_8cpp.html#a2af412554a33103f533b0e2ba1df9aeb">min_sector</a> (const sensor_msgs::LaserScan::ConstPtr &amp;msg, int i, int j)</td></tr>
<tr class="memdesc:a2af412554a33103f533b0e2ba1df9aeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for a minimum in an array section.  <a href="manual_8cpp.html#a2af412554a33103f533b0e2ba1df9aeb">More...</a><br /></td></tr>
<tr class="separator:a2af412554a33103f533b0e2ba1df9aeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0136605485fa30892f270d1ba6d0f727"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manual_8cpp.html#a0136605485fa30892f270d1ba6d0f727">Assistance</a> ()</td></tr>
<tr class="memdesc:a0136605485fa30892f270d1ba6d0f727"><td class="mdescLeft">&#160;</td><td class="mdescRight">Corrects user defined twist to avoid obstacles.  <a href="manual_8cpp.html#a0136605485fa30892f270d1ba6d0f727">More...</a><br /></td></tr>
<tr class="separator:a0136605485fa30892f270d1ba6d0f727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7753cf78751ce494b73413f722de2ba2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manual_8cpp.html#a7753cf78751ce494b73413f722de2ba2">ScanCallBack</a> (const sensor_msgs::LaserScan::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:a7753cf78751ce494b73413f722de2ba2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publishes a user defined twist in mode 2 and 3.  <a href="manual_8cpp.html#a7753cf78751ce494b73413f722de2ba2">More...</a><br /></td></tr>
<tr class="separator:a7753cf78751ce494b73413f722de2ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top"><a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a21a08c9e44ed0577c7bf4a2a79aceff4"><td class="memItemLeft" align="right" valign="top"><a id="a21a08c9e44ed0577c7bf4a2a79aceff4"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manual_8cpp.html#a21a08c9e44ed0577c7bf4a2a79aceff4">f_lft</a></td></tr>
<tr class="memdesc:a21a08c9e44ed0577c7bf4a2a79aceff4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smallest value in the left forward region. <br /></td></tr>
<tr class="separator:a21a08c9e44ed0577c7bf4a2a79aceff4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfe906a9075c1cf49413334237a5dac4"><td class="memItemLeft" align="right" valign="top"><a id="acfe906a9075c1cf49413334237a5dac4"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manual_8cpp.html#acfe906a9075c1cf49413334237a5dac4">front</a></td></tr>
<tr class="memdesc:acfe906a9075c1cf49413334237a5dac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smallest value in the front forward region. <br /></td></tr>
<tr class="separator:acfe906a9075c1cf49413334237a5dac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d6fe3f8140c80f1a57e9d3f2c626c1f"><td class="memItemLeft" align="right" valign="top"><a id="a9d6fe3f8140c80f1a57e9d3f2c626c1f"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manual_8cpp.html#a9d6fe3f8140c80f1a57e9d3f2c626c1f">f_rgt</a></td></tr>
<tr class="memdesc:a9d6fe3f8140c80f1a57e9d3f2c626c1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smallest value in the right forward region. <br /></td></tr>
<tr class="separator:a9d6fe3f8140c80f1a57e9d3f2c626c1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3bec594c0bfa545e4ca43196fcd4fd6"><td class="memItemLeft" align="right" valign="top"><a id="af3bec594c0bfa545e4ca43196fcd4fd6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manual_8cpp.html#af3bec594c0bfa545e4ca43196fcd4fd6">current_mode</a> = 0</td></tr>
<tr class="memdesc:af3bec594c0bfa545e4ca43196fcd4fd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">User defined behavior mode. <br /></td></tr>
<tr class="separator:af3bec594c0bfa545e4ca43196fcd4fd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6292ba4115524eee4204b29002d90e"><td class="memItemLeft" align="right" valign="top"><a id="aba6292ba4115524eee4204b29002d90e"></a>
geometry_msgs::Twist&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manual_8cpp.html#aba6292ba4115524eee4204b29002d90e">my_twist</a></td></tr>
<tr class="memdesc:aba6292ba4115524eee4204b29002d90e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Twist command to be published. <br /></td></tr>
<tr class="separator:aba6292ba4115524eee4204b29002d90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72098416ee2bd2558c39f6adeb352ada"><td class="memItemLeft" align="right" valign="top"><a id="a72098416ee2bd2558c39f6adeb352ada"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><b>pub_twist</b></td></tr>
<tr class="separator:a72098416ee2bd2558c39f6adeb352ada"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Controller in manual modes 2 and 3. </p>
<dl class="section author"><dt>Author</dt><dd>Eléa Papin </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>12/03/2022</dd></dl>
<p>Subscribes to: <br  />
 ° /current_mode ° /scan ° /manual_cmd_vel</p>
<p>Publishes to: <br  />
 ° /cmd_vel</p>
<p>Description : The manual node is there to handle the second and third modes. When the mode is set to the second, the twist generated by teleop_twist_keyboard is forwarded to the gazebo simulation without alterations. In the thrid mode, a correction is applied before publication of the twist so that the robot cannot drive into the walls. This correction is created thanks to the information provided by the laser scanner in the simulation </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0136605485fa30892f270d1ba6d0f727"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0136605485fa30892f270d1ba6d0f727">&#9670;&nbsp;</a></span>Assistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Assistance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Corrects user defined twist to avoid obstacles. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns nothing, modifies a global variable</dd></dl>
<p>Taking into account the minimum distance value in the sectors front_left, front an d front_right, it modifies the twist to clear the obstacles and avoid collisions. </p>

</div>
</div>
<a id="a55a5fd22bb68a99b97ad0ba4ac56f88b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55a5fd22bb68a99b97ad0ba4ac56f88b">&#9670;&nbsp;</a></span>CmdCallBack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CmdCallBack </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::Twist &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the user defined twist. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>is a geometry_msgs/Twist argument </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns nothing</dd></dl>
<p>This function is a call back for the subscription to the topic /manual_cmd_vel. It retrieves a geometry_msgs/Twist message. It updates the global variable my_twist. </p>

</div>
</div>
<a id="a2af412554a33103f533b0e2ba1df9aeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2af412554a33103f533b0e2ba1df9aeb">&#9670;&nbsp;</a></span>min_sector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float min_sector </td>
          <td>(</td>
          <td class="paramtype">const sensor_msgs::LaserScan::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>j</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search for a minimum in an array section. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>is a sensor_msgs/LaserScan/ConstPtr argument </td></tr>
    <tr><td class="paramname">i</td><td>is an integer, index of the start of the section </td></tr>
    <tr><td class="paramname">j</td><td>is an integer, index of the end of the section, not included </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns nothing</dd></dl>
<p>This is an auxilliary function computing the minimum of ranges within a given sector of a message provided by a laser scan. The minimum is the closest obstacle to the robot is the sector defined by indexes i and j. </p>

</div>
</div>
<a id="aa0a00b277a12ab91542010de9fd38df9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0a00b277a12ab91542010de9fd38df9">&#9670;&nbsp;</a></span>ModeCallBack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ModeCallBack </td>
          <td>(</td>
          <td class="paramtype">const std_msgs::Int32 &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the selected behavior mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>is a std_msgs/Int32 argument </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns nothing</dd></dl>
<p>This function is a call back for the subscription to the topic /current_mode. It retrieves a std_msgs/Int32 message. It updates the global variable current_mode. </p>

</div>
</div>
<a id="a7753cf78751ce494b73413f722de2ba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7753cf78751ce494b73413f722de2ba2">&#9670;&nbsp;</a></span>ScanCallBack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ScanCallBack </td>
          <td>(</td>
          <td class="paramtype">const sensor_msgs::LaserScan::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publishes a user defined twist in mode 2 and 3. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>is an sensor_msgs/LaserScan/ConstPtr </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns nothing, publishes a twist</dd></dl>
<p>Retrieve the sensor information from Laser scan on <code>/scan</code>, computes the closest obstacles. Call assistance if mode 3 is enabled, that used the obstacle infomation. Publishes a twist on <code>cmd_vel</code> in mode 2 and 3. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
